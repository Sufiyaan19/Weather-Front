<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Weather App</title>
    <link rel="stylesheet" href="weather.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <!-- Back Button -->
    <button onclick="history.back()" class="btn btn-primary position-fixed top-0 start-0 m-3 z-index-1050">
      <i class="bi bi-arrow-left"></i> Back
    </button>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="bi bi-cloud-haze2-fill"></i> Weather</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a onclick="location.reload()" id="home" class="nav-link active hov" aria-current="page" href="wether.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="about_us.html">About us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="dashboard.html">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="favorites.html">Favorites</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="comparison.html">Comparison</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="feedback.html">Feedback</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="settings.html">Settings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="alerts.html">Alerts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="forecast.html">Forecast</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="maps.html">Maps</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="history.html">History</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="tips.html">Tips</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link hov" href="subscriptions.html">Subscriptions</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle hov" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Join us</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="signup.html">Sign up</a></li>
                            <li><a class="dropdown-item" href="login.html">Login</a></li>
                            <li><hr class="dropdown-divider"></li>
                        </ul>
                    </li>
                </ul>
                <button id="theme-toggle" class="btn btn-outline-primary">Light Mode</button>
            </div>
        </div>
    </nav>

    <!-- Settings Content -->
    <div class="container mt-5">
        <h2 style="color: var(--text-color);" class="text-center mb-4">Settings</h2>

        <!-- Theme Toggle -->
        <div class="card border-2 border-white rounded-5 mb-4" style="background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 50%, rgba(0, 0, 0, 0.7) 50%);">
            <div class="card-body" style="color: var(--text-color);">
                <h5 class="card-title" style="color: var(--text-color);">Theme</h5>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="themeToggle">
                    <label class="form-check-label" for="themeToggle" style="color: var(--text-color);">
                        Enable Dark Mode
                    </label>
                </div>
                <small style="color: var(--text-color);">Toggle to switch between light and dark themes. Background images remain unchanged.</small>
            </div>
        </div>

        <!-- Units Preference -->
        <div class="card border-2 border-white rounded-5 mb-4" style="background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 50%, rgba(0, 0, 0, 0.7) 50%);">
            <div class="card-body" style="color: var(--text-color);">
                <h5 class="card-title" style="color: var(--text-color);">Temperature Units</h5>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="units" id="celsius" value="celsius" checked>
                    <label class="form-check-label" for="celsius" style="color: var(--text-color);">
                        Celsius (°C)
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="units" id="fahrenheit" value="fahrenheit">
                    <label class="form-check-label" for="fahrenheit" style="color: var(--text-color);">
                        Fahrenheit (°F)
                    </label>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div class="card border-2 border-white rounded-5" style="background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 50%, rgba(0, 0, 0, 0.7) 50%);">
            <div class="card-body" style="color: var(--text-color);">
                <h5 class="card-title" style="color: var(--text-color);">Notifications</h5>
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notificationsToggle">
                    <label class="form-check-label" for="notificationsToggle" style="color: var(--text-color);">
                        Enable Weather Alerts
                    </label>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <button class="btn btn-success" onclick="saveSettings()">Save Settings</button>
        </div>
        <div id="successMessage" class="text-center mt-3" style="display: none;">
            <div class="alert alert-success" role="alert">
                Settings saved successfully! Theme applied instantly.
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="theme.js"></script>
    <script>
        // Load saved settings on page load
        document.addEventListener('DOMContentLoaded', function() {
            const theme = localStorage.getItem('theme') || 'dark';
            const units = localStorage.getItem('units') || 'celsius';
            const notifications = localStorage.getItem('notifications') === 'true';

            // Set toggle based on current theme (checked = dark mode)
            document.getElementById('themeToggle').checked = theme === 'dark';
            document.getElementById(units).checked = true;
            document.getElementById('notificationsToggle').checked = notifications;
        });

        // Function to save settings
        function saveSettings() {
            const theme = document.getElementById('themeToggle').checked ? 'dark' : 'light';
            const units = document.querySelector('input[name="units"]:checked').value;
            const notifications = document.getElementById('notificationsToggle').checked;

            // Save to localStorage
            localStorage.setItem('theme', theme);
            localStorage.setItem('units', units);
            localStorage.setItem('notifications', notifications);

            // Apply theme instantly
            applyTheme(theme);

            // Show success message with animation
            const msg = document.getElementById('successMessage');
            msg.style.display = 'block';
            msg.style.opacity = '0';
            msg.style.transform = 'translateY(-10px)';
            setTimeout(() => {
                msg.style.opacity = '1';
                msg.style.transform = 'translateY(0)';
            }, 100);
            setTimeout(() => {
                msg.style.opacity = '0';
                msg.style.transform = 'translateY(-10px)';
                setTimeout(() => msg.style.display = 'none', 300);
            }, 3000);
        }

        // Add instant toggle functionality (optional - theme changes immediately on toggle)
        document.getElementById('themeToggle').addEventListener('change', function() {
            const theme = this.checked ? 'dark' : 'light';
            applyTheme(theme);
            localStorage.setItem('theme', theme);
        });
    </script>
</body>
</html>
